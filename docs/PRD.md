# ТЗ на разработку Telegram Mini App: «Школьный Справочник»

## 1. Общее описание

Приложение представляет собой интерактивный справочник формул и определений. Пользователь выбирает предмет и тему, после чего получает структурированную информацию с примерами.

## 2. Архитектура и Техстек

- **Frontend**: Next.js (App Router), TypeScript, Tailwind CSS для стилизации
- **UI Library**: shadcn/ui (компоненты Card, Input, Button, Accordion)
- **Backend/Database**: Supabase. Таблицы для хранения предметов, тем и контента
- **Auth**: NextAuth.js с интеграцией Telegram InitData для автоматического входа
- **Hosting**: Vercel

## 3. Структура базы данных (Supabase)

Минимум три связанные таблицы:

### `subjects`
- `id`
- `name` (Физика, Алгебра, Русский язык)
- `icon`

### `topics`
- `id`
- `subject_id` (FK)
- `title` (например, «Оптика»)

### `content`
- `id`
- `topic_id` (FK)
- `type` (определение или формула)
- `body` (текст или LaTeX-строка)
- `example` (текст примера)

## 4. Функциональные требования

### 4.1. Главный экран (Home)

- Поисковая строка для быстрого нахождения темы по ключевым словам
- Сетка (Grid) с карточками предметов (используй shadcn/ui Card)
- Кнопка «Избранное» для быстрого доступа к сохраненным формулам

### 4.2. Экран списка тем

- Отображение всех тем выбранного предмета
- Прогресс-бар (опционально): сколько тем уже изучено

### 4.3. Экран контента (Карточка темы)

- Использование Accordion или Tabs для разделения на «Определения» и «Формулы»
- **Важно**: Для рендеринга формул используй библиотеку `react-katex`, чтобы формулы выглядели профессионально, например: `$E = mc^2$`
- Кнопка «Скопировать» для текста или формулы

### 4.4. Интеграция с Telegram

- Настройка Telegram WebApp SDK для адаптации темы приложения под цвета интерфейса пользователя (светлая/темная тема)
- Haptic Feedback (виброотклик) при нажатии на кнопки

## 5. Этапы разработки (Roadmap)

**Шаг 1**: Развертывание проекта Next.js и установка Tailwind + shadcn/ui

**Шаг 2**: Настройка Supabase: создание таблиц и заполнение их тестовыми данными (3-4 темы)

**Шаг 3**: Создание API-роутов в Next.js для получения данных из Supabase

**Шаг 4**: Верстка интерфейса: главная страница → список тем → карточка

**Шаг 5**: Интеграция с Telegram API (скрипт https://telegram.org/js/telegram-web-app.js)

**Шаг 6**: Деплой на Vercel и привязка к боту через BotFather (`/setwebapp`)
